var util                        = require('util');
var RequestResponseController   = require('castv2-client').RequestResponseController;

function WebController(client, sourceId, destinationId) {
  RequestResponseController.call(this, client, sourceId, destinationId, 'urn:x-cast:' + WebController.APP_URN);
}

util.inherits(WebController, RequestResponseController);

WebController.prototype.load = function(uri, options, callback) {
	console.log('EMITTING LOAD');

	if(typeof options === 'function') {
		callback = options;
		options = {};
	} else if(typeof options !== 'object') {
		// Remain backwards compatible with old refreshRate option
		options = { refreshRate: options };
	}
  this.request({
    type: 'load',
    url: uri,
    refresh: options.refreshRate || 0,
  }, function(err, response) {
	  console.log('GOT WEB RESPONSE', err, response);
    if(err) return callback(err);
    var status = response.status[0];
    callback(null, status);
  });
};

module.exports = WebController;
